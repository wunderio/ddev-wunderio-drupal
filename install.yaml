name: ddev-drupal
ddev_version_constraint: ">= v1.23.0"

# Files copied into the project root preserving paths
# The dist folder structure mirrors the target project structure
project_files:
  - config.wunderio.yaml
  - docker-compose.wunderio.yaml
# - drush/sites/local.site.yml

global_files:
  - commands/
  - wunderio/core/

pre_install_actions:
  - |
    #ddev-description: Checking DDEV environment
    if [ -z "${DDEV_APPROOT+x}" ]; then
      echo "Error: DDEV version is too old or not detected (missing DDEV_APPROOT). Please update DDEV."
      exit 1
    fi

post_install_actions:
  - |
    #ddev-description: Finalizing Wunderio DDEV Drupal installation
    echo "Wunderio DDEV Drupal installed. Managed files are marked with #ddev-generated."
    echo "Custom scripts can be added to .ddev/wunderio/custom/ and will be preserved."
